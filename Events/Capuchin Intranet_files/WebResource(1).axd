
var DayPilotMonth={};DayPilotMonth.Month=function($a){var $b=document.getElementById($a);var $c=this;this.id=$a;this.width='100%';this.cellHeight=100;this.eventFontColor="#000000";this.eventFontFamily="Tahoma";this.eventFontSize="11px";this.headerBackColor='#ECE9D8';this.headerFontColor='#000000';this.headerFontFamily="Tahoma";this.headerFontSize="10pt";this.headerHeight=20;this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.weekStarts=1;this.innerBorderColor='#cccccc';this.borderColor='black';this.eventHeight=16;this.cellHeaderHeight=16;this.numberFormat='0.00';this.clientState={};this.afterRender=function(){};this.backColor='#FFFFD5';this.nonBusinessBackColor='#FFF4BC';this.cellHeaderBackColor='';this.cellHeaderFontColor='#000000';this.cellHeaderFontFamily='Tahoma';this.cellHeaderFontSize='10pt';this.eventBackColor='White';this.eventBorderColor='Black';this.eventFontColor='#000000';this.eventFontFamily='Tahoma';this.eventFontSize='11px';this.eventHeight=16;this.cellWidth=14.285;this.lineSpace=1;this.eventTextLayer='Top';this.eventStartTime=true;this.eventEndTime=true;this.eventTextAlignment='Center';this.eventTextLeftIndent=20;this.showWeekend=true;this.cellMode=false;this.eventMoveHandling='CallBack';this.eventResizeHandling='CallBack';this.timeRangeSelectedHandling='CallBack';this.backendUrl=null;this.updateView=function($d,$e){var $d=eval("("+$d+")");if($d.UpdateType=="None"){return;};var $f=document.createElement("input");$f.type='hidden';$f.name=$c.id+"_vsupdate";$f.id=$f.name;$f.value=$d.VsUpdate;$c.vsph.innerHTML='';$c.vsph.appendChild($f);$c.events=$d.Events;if($d.UpdateType=="Full"){$c.year=$d.Year;$c.month=$d.Month;$c.cellProperties=$d.CellProperties;$c.headerProperties=$d.HeaderProperties;};$c.clearEvents();$c.prepareRows();$c.prepareEvents();if($d.UpdateType=="Full"){$c.clearTable();$c.drawTable();}else{$c.updateHeight();};$c.drawEvents();$c.afterRender($d.CallBackData,true);};this.lineHeight=function(){return this.eventHeight+this.lineSpace;};this.applyCssClass=function($g){if(this.cssClassPrefix){return this.cssClassPrefix+$g;}else{return "";}};this.prepareEvents=function(){if(this.cellMode){this.prepareEventsCells();}else{this.prepareEventsRows();}};this.prepareEventsRows=function(){for(var x=0;x<this.events.length;x++){var e=this.events[x];e.Start=new DayPilot.Date(e.Start).d;e.End=new DayPilot.Date(e.End).d;if(e.Start.getTime()>e.End.getTime()){continue;};for(var i=0;i<this.rows.length;i++){var $h=this.rows[i];if($h.belongsHere(e)){$h.events.push(e);}}};for(var ri=0;ri<this.rows.length;ri++){var $h=this.rows[ri];$h.events.sort(this.eventComparer);for(var ei=0;ei<this.rows[ri].events.length;ei++){var ev=$h.events[ei];var $i=$h.getStartColumn(ev);var $j=$h.getWidth(ev);var $k=$h.putIntoLine(ev,$i,$j,ri);}}};this.prepareEventsCells=function(){this.cellEvents=[];for(var x=0;x<this.getColCount();x++){this.cellEvents[x]=[];for(var y=0;y<this.rows.length;y++){var $l={};var d=DayPilot.Date.addDays(this.startDate,y*7+x);$l.start=d;$l.end=DayPilot.Date.addDays(d,1);$l.events=[];this.cellEvents[x][y]=$l;}};for(var i=0;i<this.events.length;i++){var e=this.events[i];e.Start=new DayPilot.Date(e.Start);e.End=new DayPilot.Date(e.Start);if(e.Start.getTime()>e.End.getTime()){continue;};for(var x=0;x<this.getColCount();x++){for(var y=0;y<this.rows.length;y++){var $l=this.cellEvents[x][y];if(e.Start.getTime()>=$l.start.getTime()&&e.Start.getTime()<$l.end.getTime()){$l.events.push(e);}}}};for(var x=0;x<this.getColCount();x++){for(var y=0;y<this.rows.length;y++){var $l=this.cellEvents[x][y];$l.events.sort(this.eventComparerCustom);}}};this.clearEvents=function(){for(var i=0;i<this.eventDivs.length;i++){this.eventDivs[i].parentNode.removeChild(this.eventDivs[i]);};this.eventDivs=[];};this.drawEvents=function(){if(this.cellMode){this.drawEventsCells();}else{this.drawEventsRows();}};this.drawEventsCells=function(){this.eventDivs=[];for(var x=0;x<this.getColCount();x++){for(var y=0;y<this.rows.length;y++){var $l=this.cellEvents[x][y];var $m=this.cells[x][y];for(var i=0;i<$l.events.length;i++){var $n={};$n.event=$l.events[i];$n.colStart=x;$n.colWidth=1;$n.row=y;$n.line=i;$n.startsHere=true;$n.endsHere=true;this.drawEvent($n);}}}};this.drawEventsRows=function(){this.eventDivs=[];for(var ri=0;ri<this.rows.length;ri++){var $h=this.rows[ri];for(var li=0;li<$h.lines.length;li++){var $k=$h.lines[li];for(var pi=0;pi<$k.length;pi++){this.drawEvent($k[pi]);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.Start||!b.Start){return 0;};var $o=a.Start.getTime()-b.Start.getTime();if($o!=0){return $o;};var $p=b.End.getTime()-a.End.getTime();return $p;};this.eventComparerCustom=function(a,b){if(!a||!b||!a.Sort||!b.Sort){return 0;};if(a.Sort.length==0||b.Sort.length==0){return $c.eventComparer(a,b);};var $d=0;var i=0;while($d==0&&a.Sort[i]&&b.Sort[i]){if(a.Sort[i]==b.Sort[i]){$d=0;}else{$d=$c.stringComparer(a.Sort[i],b.Sort[i],$c.sortDirections[i]);};i++;};return $d;};this.stringComparer=function(a,b,$q){var $r=($q!="desc");var $s=$r?-1:1;var $t=-$s;if(a==null&&b==null){return 0;};if(b==null){return $t;};if(a==null){return $s;};var ar=[];ar[0]=a;ar[1]=b;ar.sort();return a==ar[0]?$s:$t;};this.drawShadow=function(x,y,$k,$u,$v){if(!$v){$v=0;};var $w=$u;this.shadow=[];this.shadow.start={x:x,y:y};this.shadow.width=$u;var $x=y*7+x-$v;if($x<0){$w+=$x;x=0;y=0;};var $y=$v;while($y>=7){y--;$y-=7;};if($y>x){var $z=7-this.getColCount();if($y>(x+$z)){y--;x=x+7-$y;}else{$w=$w-$y+x;x=0;}}else{x-=$y;};if(y<0){y=0;x=0;};if(DayPilotMonth.resizingEvent){this.relative.style.cursor='w-resize';}else if(DayPilotMonth.movingEvent){this.relative.style.cursor='move';}while($w>0&&y<this.rows.length){var $A=Math.min(this.getColCount()-x,$w);var $h=this.rows[y];var $B=document.createElement("div");$B.unselectable='on';$B.style.position='absolute';$B.style.left=(this.getCellWidth()*x)+'%';$B.style.width=(this.getCellWidth()*$A)+'%';$B.style.top=(this.getRowTop(y)+1)+'px';$B.style.height=(this.eventHeight)+'px';var $C=document.createElement("div");$C.style.marginLeft='1px';$C.style.height=($h.getHeight()-5)+'px';$C.style.border='2px dotted #666666';$B.appendChild($C);this.relative.appendChild($B);this.shadow.push($B);$w-=($A+7-this.getColCount());x=0;y++;}};this.clearShadow=function(){if(this.shadow){for(var i=0;i<this.shadow.length;i++){this.relative.removeChild(this.shadow[i]);};this.shadow=null;this.relative.style.cursor='';}};this.getEventTop=function($h,$k){var top=this.headerHeight;for(var i=0;i<$h;i++){top+=this.rows[i].getHeight();};top+=this.cellHeaderHeight;top+=$k*this.lineHeight();return top;};this.getDateFromCell=function(x,y){return DayPilot.Date.addDays(this.startDate,y*7+x);};this.drawEvent=function($n,$D){var $D=this.cellMode;var ev=$n.event;var $h=$n.row;var $k=$n.line;var $i=$n.colStart;var $j=$n.colWidth;var $E=$D?0:this.getCellWidth()*($i);var $u=$D?100:this.getCellWidth()*($j);var top=$D?$k*this.lineHeight():this.getEventTop($h,$k);var e=document.createElement("div");e.unselectable='on';e.style.height=this.eventHeight+'px';e.style.fontFamily=this.eventFontFamily;if($D){e.style.marginRight="2px";e.style.marginBottom="2px";}else{e.style.width=$u+'%';e.style.position='absolute';e.style.left=$E+'%';e.style.top=top+'px';};if(this.showToolTip){e.title=ev.ToolTip;};e.onclick=function(e){DayPilotMonth.movingEvent=null;$c.eventClick(new DayPilotMonth.Event($c,$n,$h));e=e||window.event;e.cancelBubble=true;};e.oncontextmenu=function(){$c.rightClick(new DayPilotMonth.Event($c,$n,$h));return false;};e.onmousedown=function(ev){ev=ev||window.event;var $F=ev.which||ev.button;if($F==1){if(typeof(DayPilotBubble)!='undefined'&&$c.bubble){DayPilotBubble.hideActive();};DayPilotMonth.movingEvent=null;if(this.style.cursor=='w-resize'||this.style.cursor=='e-resize'){var $G={};$G.start={};$G.start.x=$i;$G.start.y=$h;$G.event=new DayPilotMonth.Event($c,$n,$h);$G.width=DayPilot.Date.daysSpan($G.event.start().d,$G.event.end().d)+1;$G.direction=this.style.cursor;DayPilotMonth.resizingEvent=$G;}else{$c.clearShadow();var $H=DayPilot.mo2($c.relative,ev);if(!$H){return;};var $l=$c.getCellBelowPoint($H.x,$H.y);var $x=DayPilot.Date.daysDiff($n.event.Start,$c.rows[$h].start);var $v=($l.y*7+$l.x)-($h*7+$i);if($x){$v+=$x;};var $I={};$I.start={};$I.start.x=$i;$I.start.y=$h;$I.start.line=$k;$I.offset=$v;$I.colWidth=$j;$I.event=new DayPilotMonth.Event($c,$n,$h);DayPilotMonth.movingEvent=$I;}}};e.onmousemove=function(ev){if(typeof(DayPilotMonth)==='undefined'){return;};if(DayPilotMonth.movingEvent||DayPilotMonth.resizingEvent){return;};var $v=DayPilot.mo(e,ev);if(!$v)return;var $J=6;if(!$c.cellMode&&$v.x<=$J&&$c.eventResizeHandling!='Disabled'){if($n.startsHere){e.style.cursor="w-resize";e.dpBorder='left';}else{e.style.cursor='not-allowed';}}else if(!$c.cellMode&&e.clientWidth-$v.x<=$J&&$c.eventResizeHandling!='Disabled'){if($n.endsHere){e.style.cursor="e-resize";e.dpBorder='right';}else{e.style.cursor='not-allowed';}}else{e.style.cursor='default';};if(typeof(DayPilotBubble)!='undefined'&&$c.bubble){if(!DayPilotMonth.movingEvent&&!DayPilotMonth.resizingEvent){$c.bubble.showEvent($c.uniqueID,new DayPilotMonth.Event($c,$n,$h));}else{DayPilotBubble.hideActive();}}};e.onmouseout=function(){if(typeof(DayPilotBubble)!='undefined'&&$c.bubble){$c.bubble.hideOnMouseOut();};e.style.cursor='';};var back=(ev.BackColor)?ev.BackColor:this.eventBackColor;var $K=document.createElement("div");$K.unselectable='on';$K.style.marginLeft='2px';$K.style.marginRight='1px';$K.style.paddingLeft='2px';$K.style.height=(this.eventHeight-2)+'px';$K.style.border='1px solid '+$c.eventBorderColor;$K.style.overflow='hidden';$K.style.position='relative';$K.style.backgroundColor=back;$K.className=this.applyCssClass("event");var $C=[];var $L=this.eventTextLayer=='Top';var $M=this.eventStartTime;var $N=this.eventEndTime;var $O=this.eventTextAlignment;var $P=this.eventTextLeftIndent;if($M){if($O=='Left'){$C.push("<div unselectable='on' style='position:absolute;text-align:left;height:1px;font-size:1px;width:100%'><div unselectable='on' style='font-size:");$C.push(this.eventTimeFontSize);$C.push(";color:");$C.push(this.eventTimeFontColor);$C.push(";font-family:");$C.push(this.eventTimeFontFamily);$C.push(";text-align:right;");$C.push("width:");$C.push($P-4);$C.push("px;");$C.push("><span style='background-color:");}else{$C.push("<div unselectable='on' style='position:absolute;text-align:left;height:1px;font-size:1px;width:100%'><div unselectable='on' style='font-size:");$C.push(this.eventTimeFontSize);$C.push(";color:");$C.push(this.eventTimeFontColor);$C.push(";font-family:");$C.push(this.eventTimeFontFamily);$C.push(";'><span style='background-color:");};$C.push(back);$C.push("' unselectable='on'>");if($n.startsHere){$C.push(DayPilot.Date.hours(ev.Start,$c.timeFormat=='Clock12Hours'));}else{$C.push("~");};$C.push("</span></div></div>");};if($N){$C.push("<div unselectable='on' style='position:absolute;text-align:right;height:1px;font-size:1px;width:100%'><div unselectable='on' style='margin-right:4px;font-size:");$C.push(this.eventTimeFontSize);$C.push(";color:");$C.push(this.eventTimeFontColor);$C.push(";font-family:");$C.push(this.eventTimeFontFamily);$C.push(";'><span style='background-color:");$C.push(back);$C.push("' unselectable='on'>");if($n.endsHere){$C.push(DayPilot.Date.hours(ev.End,$c.timeFormat=='Clock12Hours'));}else{$C.push("~");};$C.push("</span></div></div>");};if($O=='Left'){var $E=$M?$P:0;$C.push("<div style='margin-top:0px;height:");$C.push(this.eventHeight-2);$C.push("px;");$C.push(";overflow:hidden;text-align:left;padding-left:");$C.push($E);$C.push("px;font-size:");$C.push(this.eventFontSize);$C.push(";color:");$C.push(this.eventFontColor);$C.push(";font-family:");$C.push(this.eventFontFamily);$C.push("' unselectable='on'>");if(ev.InnerHTML){$C.push(ev.InnerHTML);}else{$C.push(ev.Text);};$C.push("</div>");}else if($O=='Center'){if($L){$C.push("<div style='position:absolute; text-align:center; width: 98%; height:1px;'>");$C.push("<span style='background-color:");$C.push(back);$C.push(";font-size:");$C.push(this.eventFontSize);$C.push(";color:");$C.push(this.eventFontColor);$C.push(";font-family:");$C.push(this.eventFontFamily);$C.push("' unselectable='on'>");if(ev.InnerHTML){$C.push(ev.InnerHTML);}else{$C.push(ev.Text);};$C.push("</span>");$C.push("</div>");}else{$C.push("<div style='margin-top:0px;height:");$C.push(this.eventHeight-2);$C.push("px;");$C.push(";overflow:hidden;text-align:center;font-size:");$C.push(this.eventFontSize);$C.push(";color:");$C.push(this.eventFontColor);$C.push(";font-family:");$C.push(this.eventFontFamily);$C.push("' unselectable='on'>");if(ev.InnerHTML){$C.push(ev.InnerHTML);}else{$C.push(ev.Text);};$C.push("</div>");}};$K.innerHTML=$C.join('');e.appendChild($K);this.eventDivs.push(e);if($D){this.cells[$i][$h].body.appendChild(e);}else{this.relative.appendChild(e);};if($c.afterEventRender){$c.afterEventRender(new DayPilotMonth.Event($c,$n,$h),e);}};this.prepareRows=function(){if(!this.year||!this.month){throw 'Year or month not specified.';};this.startDate=DayPilot.Date.getStart(this.year,this.month,this.getWeekStart());var $Q=DayPilot.Date.firstDayOfMonth(this.year,this.month);var $R=DayPilot.Date.lastDayOfMonth(this.year,this.month);var $S=DayPilot.Date.daysDiff(this.startDate,$R)+1;var $T=Math.ceil($S/7);this.days=$T*7;this.rows=[];for(var x=0;x<$T;x++){var r={};r.start=DayPilot.Date.addDays(this.startDate,x*7);r.end=DayPilot.Date.addDays(r.start,this.getColCount());r.events=[];r.lines=[];r.index=x;r.minHeight=this.cellHeight;r.calendar=this;r.belongsHere=function(ev){return !(ev.End.getTime()<=this.start.getTime()||ev.Start.getTime()>=this.end.getTime());};r.getPartStart=function(ev){return DayPilot.Date.max(this.start,ev.Start);};r.getPartEnd=function(ev){return DayPilot.Date.min(this.end,ev.End);};r.getStartColumn=function(ev){var $U=this.getPartStart(ev);return DayPilot.Date.daysDiff(this.start,$U);};r.getWidth=function(ev){return DayPilot.Date.daysSpan(this.getPartStart(ev),this.getPartEnd(ev))+1;};r.putIntoLine=function(ev,$i,$j,$h){var $V=this;for(var i=0;i<this.lines.length;i++){var $k=this.lines[i];if($k.isFree($i,$j)){$k.addEvent(ev,$i,$j,$h,i);return i;}};var $k=[];$k.isFree=function($i,$j){var $W=true;for(var i=0;i<this.length;i++){if(!($i+$j-1<this[i].colStart||$i>this[i].colStart+this[i].colWidth-1)){$W=false;}};return $W;};$k.addEvent=function(ev,$i,$j,$h,$X){var $n={};$n.event=ev;$n.colStart=$i;$n.colWidth=$j;$n.row=$h;$n.line=$X;$n.startsHere=$V.start.getTime()<=ev.Start.getTime();$n.endsHere=$V.end.getTime()>=ev.End.getTime();this.push($n);};$k.addEvent(ev,$i,$j,$h,this.lines.length);this.lines.push($k);return this.lines.length-1;};r.getStart=function(){var $Y=0;for(var i=0;i<$c.rows.length&&i<this.index;i++){$Y+=$c.rows[i].getHeight();}};r.getHeight=function(){return Math.max(this.lines.length*$c.lineHeight()+$c.cellHeaderHeight,this.calendar.cellHeight);};this.rows.push(r);};this.endDate=DayPilot.Date.addDays(this.startDate,$T*7);};this.getHeight=function(){var $Z=this.headerHeight;for(var i=0;i<this.rows.length;i++){$Z+=this.rows[i].getHeight();};return $Z;};this.getWidth=function($Y,end){var $00=(end.y*7+end.x)-($Y.y*7+$Y.x);return $00+1;};this.getMinCoords=function($01,$02){if(($01.y*7+$01.x)<($02.y*7+$02.x)){return $01;}else{return $02;}};this.drawRelative=function(){this.relative=document.createElement("div");this.relative.style.MozUserSelect='none';this.relative.style.KhtmlUserSelect='none';this.relative.style.position='relative';this.relative.style.width=this.width;this.relative.style.height=this.getHeight()+'px';this.relative.onmousemove=function(ev){if(DayPilotMonth.resizingEvent){var $H=DayPilot.mo2($c.relative,ev);if(!$H){return;};var $l=$c.getCellBelowPoint($H.x,$H.y);$c.clearShadow();var $G=DayPilotMonth.resizingEvent;var $03=$G.start;var $u,$Y;if($G.direction=='w-resize'){$Y=$l;var $04=$G.event.end().d;if(DayPilot.Date.getDate($04).getTime()==$04.getTime()){$04=DayPilot.Date.addDays($04,-1);};var end=$c.getCellFromDate($04);$u=$c.getWidth($l,end);}else{$Y=$c.getCellFromDate($G.event.start().d);$u=$c.getWidth($Y,$l);};if($u<1){$u=1;};$c.drawShadow($Y.x,$Y.y,0,$u);}else if(DayPilotMonth.movingEvent){var $H=DayPilot.mo2($c.relative,ev);if(!$H){return;};var $l=$c.getCellBelowPoint($H.x,$H.y);$c.clearShadow();var event=DayPilotMonth.movingEvent.event;var $v=DayPilotMonth.movingEvent.offset;var $u=$c.cellMode?1:DayPilot.Date.daysSpan(event.start().d,event.end().d)+1;if($u<1){$u=1;};$c.drawShadow($l.x,$l.y,0,$u,$v);}};$b.appendChild(this.relative);this.vsph=document.createElement("div");this.vsph.style.display='none';$b.appendChild(this.vsph);};this.updateHeight=function(){this.relative.style.height=this.getHeight()+'px';for(var x=0;x<this.cells.length;x++){for(var y=0;y<this.cells[x].length;y++){this.cells[x][y].style.top=this.getRowTop(y)+'px';this.cells[x][y].style.height=this.rows[y].getHeight()+'px';}}};this.getCellBelowPoint=function(x,y){var $05=Math.floor(this.relative.clientWidth/this.getColCount());var $06=Math.min(Math.floor(x/$05),this.getColCount()-1);var $h=null;var $Z=this.headerHeight;for(var i=0;i<this.rows.length;i++){$Z+=this.rows[i].getHeight();if(y<$Z){$h=i;break;}};if($h==null){$h=this.rows.length-1;};var $l={};$l.x=$06;$l.y=$h;return $l;};this.getCellFromDate=function($07){var $u=DayPilot.Date.daysDiff(this.startDate,$07);var $l={x:0,y:0};while($u>=7){$l.y++;$u-=7;};$l.x=$u;return $l;};this.drawTable=function(){var $08=document.createElement("div");$08.oncontextmenu=function(){return false;};this.relative.appendChild($08);this.cells=[];for(var x=0;x<this.getColCount();x++){this.cells[x]=[];var $09=this.headerProperties?this.headerProperties[x]:null;var $0a=document.createElement("div");$0a.unselectable='on';$0a.style.position='absolute';$0a.style.left=(this.getCellWidth()*x)+'%';$0a.style.width=(this.getCellWidth())+'%';$0a.style.top='0px';$0a.style.height=(this.headerHeight)+'px';$0a.style.backgroundColor=$09?$09.BackColor:this.headerBackColor;$0a.style.fontFamily=this.headerFontFamily;$0a.style.fontSize=this.headerFontSize;$0a.style.color=this.headerFontColor;$0a.style.borderLeft='1px solid '+this.borderColor;$0a.style.borderTop='1px solid '+this.borderColor;$0a.style.borderBottom='1px solid '+this.borderColor;$0a.style.textAlign='center';$0a.style.cursor='default';$0a.className=this.applyCssClass("header");if(x==this.getColCount()-1){$0a.style.borderRight='1px solid '+this.borderColor;};var $0b=x+this.getWeekStart();if($0b>6){$0b-=7;};$0a.innerHTML=$09?$09.InnerHTML:this.dayNames[$0b];$08.appendChild($0a);for(var y=0;y<this.rows.length;y++){this.drawCell(x,y,$08);}};var $m=document.createElement("div");$m.style.position='absolute';$m.style.padding='2px';$m.style.top='0px';$m.style.left='0px';$m.style.backgroundColor="#FF6600";$m.style.color="white";$m.innerHTML="\u0044\u0045\u004D\u004F";if(this.numberFormat)this.relative.appendChild($m);};this.clearTable=function(){for(var x=0;x<this.cells.length;x++){for(var y=0;y<this.cells[x].length;y++){this.cells[x][y].onclick=null;}};this.relative.innerHTML='';};this.drawCell=function(x,y,$08){var $h=this.rows[y];var d=DayPilot.Date.addDays(this.startDate,y*7+x);var $0c=this.cellProperties?this.cellProperties[y*7+x]:null;var $l=document.createElement("div");$l.unselectable='on';$l.style.position='absolute';$l.style.cursor='default';$l.style.left=(this.getCellWidth()*x)+'%';$l.style.width=(this.getCellWidth())+'%';$l.style.top=(this.getRowTop(y))+'px';$l.style.height=($h.getHeight())+'px';$l.className=this.applyCssClass("cell");if($0c){$l.style.backgroundColor=$0c["BackColor"];}else{$l.style.backgroundColor=this.getCellBackColor(d);};if(x==0){$l.style.borderLeft='1px solid '+this.borderColor;}else{$l.style.borderLeft='1px solid '+this.innerBorderColor;};if(y==0){$l.style.borderTop='1px solid '+this.borderColor;}else{$l.style.borderTop='1px solid '+this.innerBorderColor;};$l.style.borderBottom='1px solid '+this.borderColor;if(x==this.getColCount()-1){$l.style.borderRight='1px solid '+this.borderColor;};$l.onclick=function(){if($c.timeRangeSelectedHandling!='Disabled'){var $Y=new DayPilot.Date(d);var end=$Y.addDays(1);$c.timeRangeSelected($Y,end);}};var $0d=document.createElement("div");if($0c&&$0c["HeaderBackColor"]){$0d.style.backgroundColor=$0c["HeaderBackColor"];}else if(this.cellHeaderBackColor){$0d.style.backgroundColor=this.cellHeaderBackColor;};$0d.style.paddingRight='2px';$0d.style.textAlign="right";$0d.style.fontFamily=this.cellHeaderFontFamily;$0d.style.fontSize=this.cellHeaderFontSize;$0d.style.color=this.cellHeaderFontColor;$0d.style.height=this.cellHeaderHeight+"px";$0d.unselectable="on";$0d.className=this.applyCssClass("cellheader");if($0c){$0d.innerHTML=$0c["HeaderText"];}else{var $07=d.getUTCDate();if($07==1){$0d.innerHTML=this.monthNames[d.getUTCMonth()]+' '+$07;}else{$0d.innerHTML=$07;}};$l.appendChild($0d);if(this.cellMode){var $0e=document.createElement("div");$0e.style.height=(this.cellHeight-this.cellHeaderHeight)+"px";$0e.style.overflow='auto';$0e.style.position='relative';var $K=document.createElement('div');$K.style.paddingTop="1px";$K.style.paddingBottom="1px";$0e.appendChild($K);$l.appendChild($0e);$l.body=$K;};this.cells[x][y]=$l;$08.appendChild($l);};this.getWeekStart=function(){if(this.showWeekend){return this.weekStarts;}else{return 1;}};this.getColCount=function(){if(this.showWeekend){return 7;}else{return 5;}};this.getCellWidth=function(){if(this.showWeekend){return 14.285;}else{return 20;}};this.getCellBackColor=function(d){if(d.getUTCDay()==6||d.getUTCDay()==0){return this.nonBusinessBackColor;};return this.backColor;};this.getRowTop=function($X){var top=this.headerHeight;for(var i=0;i<$X;i++){top+=this.rows[i].getHeight();};return top;};this.postBack=function($0f){var $0g=[];for(var i=1;i<arguments.length;i++){$0g.push(arguments[i]);};__doPostBack($c.uniqueID,$0f+DayPilot.ea($0g));};this.callBack=function($0f){var $0g=[];for(var i=1;i<arguments.length;i++){$0g.push(arguments[i]);};$0g.push(DayPilot.Date.firstDayOfMonth($c.year,$c.month));WebForm_DoCallback(this.uniqueID,$0f+DayPilot.ea($0g),this.updateView,null,this.callbackError,true);};this.callBack2=function($0h,$0i,$0j){var $0k={};$0k.action=$0h;$0k.parameters=$0j;$0k.data=$0i;$0k.header=this.getCallBackHeader();var $0l="JSON"+DayPilot.JSON.stringify($0k);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$0l,this.ajaxError);}else{WebForm_DoCallback(this.uniqueID,$0l,this.updateView,null,this.callbackError,true);}};this.callBackResponse=function($0m){$c.updateView($0m.responseText);};this.getCallBackHeader=function(){var h={};h.control="dpm";h.startDate=DayPilot.Date.firstDayOfMonth($c.year,$c.month);h.visibleStart=new DayPilot.Date(this.startDate);h.visibleEnd=h.visibleStart.addDays(this.days);h.clientState=this.clientState;return h;};this.eventClickPostBack=function(e){this.postBack('CLK:',e.value(),e.tag(),e.start(),e.end(),e.text(),null,false);};this.eventClickCallBack=function(e,$0i){this.callBack2('EventClick',$0i,e);};this.eventClick=function(e){if(!e.clickingAllowed()){return;};switch($c.eventClickHandling){case 'PostBack':$c.eventClickPostBack(e);break;case 'CallBack':$c.eventClickCallBack(e);break;case 'JavaScript':$c.eventClickCustom(e);break;}};this.rightClickPostBack=function(e){this.postBack('RCK:',e.value(),e.tag(),e.start(),e.end(),e.text(),null,false);};this.rightClickCallBack=function(e,$0i){this.callBack2('EventRightClick',$0i,e);};this.rightClick=function(e){this.event=e;if(!e.rightClickingAllowed()){return false;};switch($c.rightClickHandling){case 'PostBack':$c.rightClickPostBack(e);break;case 'CallBack':$c.rightClickCallBack(e);break;case 'JavaScript':$c.rightClickCustom(e);break;case 'ContextMenu':if(e.contextMenu){eval(e.contextMenu+".show(this.event)");}else{if($c.contextMenu){$c.contextMenu.show(e);}};break;};return false;};this.eventMenuClickPostBack=function(e,$0n){this.postBack('MNU:',e.value(),e.tag(),e.start(),e.end(),e.text(),null,false,$0n);};this.eventMenuClickCallBack=function(e,$0n,$0i){var $0o={};$0o.e=e;$0o.command=$0n;this.callBack2('EventMenuClick',$0i,$0o);};this.eventMenuClick=function($0n,e,$0p){switch($0p){case 'PostBack':$c.eventMenuClickPostBack(e,$0n);break;case 'CallBack':$c.eventMenuClickCallBack(e,$0n);break;}};this.eventMovePostBack=function(e,$0q,$0r){if(!$0q)throw 'newStart is null';if(!$0r)throw 'newEnd is null';this.postBack('MOV:',e.value(),e.tag(),e.start(),e.end(),e.text(),null,false,$0q,$0r,null);};this.eventMoveCallBack=function(e,$0q,$0r,$0s,$0i){if(!$0q)throw 'newStart is null';if(!$0r)throw 'newEnd is null';var $0o={};$0o.e=e;$0o.newStart=$0q;$0o.newEnd=$0r;$0o.newColumn=$0s;this.callBack2('EventMove',$0i,$0o);};this.eventMove=function(e,x,y,$v){var $0t=DayPilot.Date.getTime(e.start().d);var $04=DayPilot.Date.getDate(e.end().d);if($04.getTime()!=e.end().d.getTime()){$04=DayPilot.Date.addDays($04,1);};var $0u=DayPilot.Date.diff(e.end().d,$04);var $0v=this.getDateFromCell(x,y);$0v=DayPilot.Date.addDays($0v,-$v);var $u=DayPilot.Date.daysSpan(e.start().d,e.end().d)+1;var $0w=DayPilot.Date.addDays($0v,$u);var $0q=new DayPilot.Date(DayPilot.Date.addTime($0v,$0t));var $0r=new DayPilot.Date(DayPilot.Date.addTime($0w,$0u));switch($c.eventMoveHandling){case 'PostBack':$c.eventMovePostBack(e,$0q,$0r);break;case 'CallBack':$c.eventMoveCallBack(e,$0q,$0r);break;case 'JavaScript':$c.eventMoveCustom(e,$0q,$0r);break;}};this.eventResizePostBack=function(e,$0q,$0r){this.postBack('RES:',e.value(),e.tag(),e.start(),e.end(),e.text(),null,false,$0q,$0r);};this.eventResizeCallBack=function(e,$0q,$0r,$0i){if(!$0q)throw 'newStart is null';if(!$0r)throw 'newEnd is null';var $0o={};$0o.e=e;$0o.newStart=$0q;$0o.newEnd=$0r;this.callBack2('EventResize',$0i,$0o);};this.eventResize=function(e,$Y,$u){var $0t=DayPilot.Date.getTime(e.start().d);var $04=DayPilot.Date.getDate(e.end().d);if(!DayPilot.Date.equals($04,e.end().d)){$04=DayPilot.Date.addDays($04,1);};var $0u=DayPilot.Date.diff(e.end().d,$04);var $0v=this.getDateFromCell($Y.x,$Y.y);var $0w=DayPilot.Date.addDays($0v,$u);var $0q=new DayPilot.Date(DayPilot.Date.addTime($0v,$0t));var $0r=new DayPilot.Date(DayPilot.Date.addTime($0w,$0u));switch($c.eventResizeHandling){case 'PostBack':$c.eventResizePostBack(e,$0q,$0r);break;case 'CallBack':$c.eventResizeCallBack(e,$0q,$0r);break;case 'JavaScript':$c.eventResizeCustom(e,$0q,$0r);break;}};this.timeRangeSelectedPostBack=function($Y,end){this.postBack('FRE:',$Y,end,null);};this.timeRangeSelectedCallBack=function($Y,end,$0i){var $0x={};$0x.start=$Y;$0x.end=end;this.callBack2('TimeRangeSelected',$0i,$0x);};this.timeRangeSelected=function($Y,end){switch($c.timeRangeSelectedHandling){case 'PostBack':$c.timeRangeSelectedPostBack($Y,end);break;case 'CallBack':$c.timeRangeSelectedCallBack($Y,end);break;case 'JavaScript':$c.timeRangeSelectedCustom($Y,end);break;}};this.refreshCallBack=function($07,$0i){var $0y;if(!$07){$0y=DayPilot.Date.firstDayOfMonth(this.year,this.month);}else if($07.isDayPilotDate||$07.getFullYear){$0y=$07;}else{var $v=parseInt($07);if(isNaN($v)){throw "You must pass null, Date, DayPilot.Date, or number as the first parameter to .refreshCallBack().";}else{var $0z=DayPilot.Date.firstDayOfMonth(this.year,this.month);var $0y=DayPilot.Date.addMonths($0z,$v);}};var $0o={};$0o.newDate=$0y;$0o.days=DayPilot.Date.daysInMonth($0y);this.callBack2("Refresh",$0i,$0o);};this.commandCallBack=function($0n,$0i){var $0o={};$0o.command=$0n;this.callBack2('Command',$0i,$0o);};this.registerGlobalHandlers=function(){if(!DayPilotMonth.globalHandlers){DayPilotMonth.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotMonth.gMouseUp);}};this.Init=function(){this.prepareRows();if(this.events){this.prepareEvents();}else{this.callBack2('Events');};this.drawRelative();this.drawTable();this.drawEvents();this.registerGlobalHandlers();this.afterRender(null,false);};};DayPilotMonth.Event=function($c,$n,$h){this.root=$c;this.contextMenu=$n.event.ContextMenu;this.value=function(){return $n.event.Value;};this.text=function(){return $n.event.Text;};this.start=function(){return new DayPilot.Date($n.event.Start);};this.end=function(){return new DayPilot.Date($n.event.End);};this.partStart=function(){return $c.rows[$h].getPartStart($n.event);};this.partEnd=function(){return $c.rows[$h].getPartEnd($n.event);};this.tag=function($0A){var t=$n.event.Tag;if(!$0A){return t;};var $0B=$c.tagFields.split(",");var $X=-1;for(var i=0;i<$0B.length;i++){if($0A===$0B[i])$X=i;};if($X==-1){throw "Field name not found.";};var $0C=t.split('&');return decodeURIComponent($0C[$X]);};this.clickingAllowed=function(){return true;};this.rightClickingAllowed=function(){return true;};this.toJSON=function($0D){var $0E={};$0E.value=this.value();$0E.text=this.text();$0E.start=this.start();$0E.end=this.end();$0E.resource=null;$0E.isAllDay=false;$0E.tag={};if($c.tagFields){var $0B=$c.tagFields.split(",");for(var i=0;i<$0B.length;i++){$0E.tag[$0B[i]]=this.tag($0B[i]);}};return $0E;};};DayPilotMonth.gMouseUp=function(ev){if(DayPilotMonth.movingEvent&&DayPilotMonth.movingEvent.event.root.shadow){var $c=DayPilotMonth.movingEvent.event.root;var e=DayPilotMonth.movingEvent.event;var $Y=$c.shadow.start;var $v=DayPilotMonth.movingEvent.offset;$c.clearShadow();DayPilotMonth.movingEvent=null;$c.eventMove(e,$Y.x,$Y.y,$v);ev.cancelBubble=true;if(ev.stopPropagation){ev.stopPropagation();};DayPilotMonth.movingEvent=null;return false;}else if(DayPilotMonth.resizingEvent){var $c=DayPilotMonth.resizingEvent.event.root;var e=DayPilotMonth.resizingEvent.event;var $Y=$c.shadow.start;var $u=$c.shadow.width;$c.clearShadow();DayPilotMonth.resizingEvent=null;$c.eventResize(e,$Y,$u);ev.cancelBubble=true;DayPilotMonth.resizingEvent=null;return false;}};

